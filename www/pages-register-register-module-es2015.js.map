{"version":3,"sources":["./src/app/pages/register/register.page.html","./src/app/pages/register/register-routing.module.ts","./src/app/pages/register/register.module.ts","./src/app/pages/register/register.page.scss","./src/app/pages/register/register.page.ts"],"names":[],"mappings":"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","file":"pages-register-register-module-es2015.js","sourcesContent":["export default \"<ion-content class=\\\"content\\\">\\r\\n  <div class=\\\"padding\\\">\\r\\n      <ion-buttons slot=\\\"start\\\">\\r\\n        <ion-back-button defaultHref=\\\"pages/login\\\"></ion-back-button>\\r\\n      </ion-buttons>\\r\\n    <br><br><br><br>\\r\\n    <ion-item >\\r\\n      <ion-label color=\\\"light\\\">{{ 'REGISTER.username.title' | translate }}</ion-label>\\r\\n      <ion-input color=\\\"light\\\" [(ngModel)]=\\\"dataUser.pseudo\\\" type=\\\"text\\\" placeholder=\\\"{{ 'REGISTER.username.placeholder' | translate }}\\\" ></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item >\\r\\n      <ion-label color=\\\"light\\\">{{ 'REGISTER.mail.title' | translate }}</ion-label>\\r\\n      <ion-input color=\\\"light\\\" type=\\\"mail\\\" placeholder=\\\"{{ 'REGISTER.mail.placeholder' | translate }}\\\" [(ngModel)]=\\\"dataUser.email\\\"></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label color=\\\"light\\\">{{ 'REGISTER.password.title' | translate }}</ion-label>\\r\\n      <ion-input color=\\\"light\\\" type=\\\"password\\\" placeholder=\\\"{{ 'REGISTER.password.placeholder' | translate }}\\\" [(ngModel)]=\\\"dataUser.password\\\"></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <ion-label color=\\\"light\\\">{{ 'REGISTER.cpassword.title' | translate }}</ion-label>\\r\\n      <ion-input color=\\\"light\\\" type=\\\"password\\\" placeholder=\\\"{{ 'REGISTER.cpassword.placeholder' | translate }}\\\" [(ngModel)]=\\\"dataUser.confirmPassword\\\"></ion-input>\\r\\n    </ion-item>\\r\\n\\r\\n    <ion-item>\\r\\n      <div>\\r\\n        <ion-checkbox  color=\\\"light\\\" [(ngModel)]=\\\"dataUser.cgu\\\"></ion-checkbox>\\r\\n      </div>\\r\\n      <ion-tab-button  color=\\\"medium\\\" tab=\\\"cgu\\\">{{ 'REGISTER.cgu' | translate }}</ion-tab-button>\\r\\n    </ion-item>\\r\\n    <br>\\r\\n    <ion-button color=\\\"tertiary\\\" expand=\\\"block\\\" shape=\\\"round\\\" (click)=\\\"signUp()\\\">{{ 'REGISTER.validate' | translate }}</ion-button>\\r\\n    <br><br>\\r\\n  </div>\\r\\n</ion-content>\\r\\n\"","import { NgModule } from '@angular/core';\r\nimport { Routes, RouterModule } from '@angular/router';\r\n\r\nimport { RegisterPage } from './register.page';\r\n\r\nconst routes: Routes = [\r\n  {\r\n    path: '',\r\n    component: RegisterPage\r\n  }\r\n];\r\n\r\n@NgModule({\r\n  imports: [RouterModule.forChild(routes)],\r\n  exports: [RouterModule],\r\n})\r\nexport class RegisterPageRoutingModule {}\r\n","import { NgModule } from '@angular/core';\r\nimport { CommonModule } from '@angular/common';\r\nimport { FormsModule } from '@angular/forms';\r\n\r\nimport { IonicModule } from '@ionic/angular';\r\n\r\nimport { RegisterPageRoutingModule } from './register-routing.module';\r\n\r\nimport { RegisterPage } from './register.page';\r\nimport { TranslateModule } from '@ngx-translate/core';\r\n\r\n@NgModule({\r\n  imports: [\r\n    CommonModule,\r\n    FormsModule,\r\n    IonicModule,\r\n    RegisterPageRoutingModule,\r\n    TranslateModule\r\n  ],\r\n  declarations: [RegisterPage]\r\n})\r\nexport class RegisterPageModule {}\r\n","export default \".padding {\\n  padding: 5% !important;\\n}\\n\\n.logo ion-icon {\\n  font-size: 9em;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.logo img {\\n  height: 100px;\\n  position: absolute;\\n  top: 50%;\\n  left: 50%;\\n  transform: translate(-50%, -50%);\\n}\\n\\n.logo {\\n  position: relative;\\n  height: 250px;\\n}\\n\\nion-content {\\n  --ion-background-color: linear-gradient(#6DD5FA, #2980B9);\\n}\\n\\nion-item {\\n  --ion-background-color: transparent!important;\\n}\\n\\n.flex {\\n  display: flex;\\n  justify-content: space-between;\\n}\\n/*# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInNyYy9hcHAvcGFnZXMvcmVnaXN0ZXIvQzpcXFVzZXJzXFxBR0FSQVVMVFxcRGVza3RvcFxcY29udGVzdDJcXFdvcmxkVmlzaXQvc3JjXFxhcHBcXHBhZ2VzXFxyZWdpc3RlclxccmVnaXN0ZXIucGFnZS5zY3NzIiwic3JjL2FwcC9wYWdlcy9yZWdpc3Rlci9yZWdpc3Rlci5wYWdlLnNjc3MiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7RUFDSSxzQkFBQTtBQ0NKOztBRENBO0VBQ0ksY0FBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxnQ0FBQTtBQ0VKOztBREFBO0VBQ0ksYUFBQTtFQUNBLGtCQUFBO0VBQ0EsUUFBQTtFQUNBLFNBQUE7RUFDQSxnQ0FBQTtBQ0dKOztBRERBO0VBQ0ksa0JBQUE7RUFDQSxhQUFBO0FDSUo7O0FERkE7RUFDSyx5REFBQTtBQ0tMOztBRERBO0VBQ0ksNkNBQUE7QUNJSjs7QURGQTtFQUNJLGFBQUE7RUFDQSw4QkFBQTtBQ0tKIiwiZmlsZSI6InNyYy9hcHAvcGFnZXMvcmVnaXN0ZXIvcmVnaXN0ZXIucGFnZS5zY3NzIiwic291cmNlc0NvbnRlbnQiOlsiLnBhZGRpbmcge1xyXG4gICAgcGFkZGluZzogNSUhaW1wb3J0YW50O1xyXG59XHJcbi5sb2dvIGlvbi1pY29ue1xyXG4gICAgZm9udC1zaXplOiA5ZW07XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIGxlZnQ6IDUwJTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG59XHJcbi5sb2dvIGltZ3tcclxuICAgIGhlaWdodDogMTAwcHg7XHJcbiAgICBwb3NpdGlvbjogYWJzb2x1dGU7XHJcbiAgICB0b3A6IDUwJTtcclxuICAgIGxlZnQ6IDUwJTtcclxuICAgIHRyYW5zZm9ybTogdHJhbnNsYXRlKC01MCUsIC01MCUpO1xyXG59XHJcbi5sb2dvIHtcclxuICAgIHBvc2l0aW9uOiByZWxhdGl2ZTtcclxuICAgIGhlaWdodDogMjUwcHg7XHJcbn1cclxuaW9uLWNvbnRlbnQge1xyXG4gICAgIC0taW9uLWJhY2tncm91bmQtY29sb3I6IGxpbmVhci1ncmFkaWVudCgjNkRENUZBLCAjMjk4MEI5KTtcclxuICAgIC8vIC0taW9uLWJhY2tncm91bmQtY29sb3I6IGxpbmVhci1ncmFkaWVudCgjZjVhZjE5LCAjZjEyNzExKTtcclxuICAgIC8vIC0taW9uLWJhY2tncm91bmQtY29sb3I6IGxpbmVhci1ncmFkaWVudCgjNDg1NTYzLCAjMjkzMjNjKTtcclxufVxyXG5pb24taXRlbSB7XHJcbiAgICAtLWlvbi1iYWNrZ3JvdW5kLWNvbG9yOiB0cmFuc3BhcmVudCFpbXBvcnRhbnQ7XHJcbn1cclxuLmZsZXgge1xyXG4gICAgZGlzcGxheTogZmxleDtcclxuICAgIGp1c3RpZnktY29udGVudDogc3BhY2UtYmV0d2VlbjtcclxufSIsIi5wYWRkaW5nIHtcbiAgcGFkZGluZzogNSUgIWltcG9ydGFudDtcbn1cblxuLmxvZ28gaW9uLWljb24ge1xuICBmb250LXNpemU6IDllbTtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgbGVmdDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbn1cblxuLmxvZ28gaW1nIHtcbiAgaGVpZ2h0OiAxMDBweDtcbiAgcG9zaXRpb246IGFic29sdXRlO1xuICB0b3A6IDUwJTtcbiAgbGVmdDogNTAlO1xuICB0cmFuc2Zvcm06IHRyYW5zbGF0ZSgtNTAlLCAtNTAlKTtcbn1cblxuLmxvZ28ge1xuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIGhlaWdodDogMjUwcHg7XG59XG5cbmlvbi1jb250ZW50IHtcbiAgLS1pb24tYmFja2dyb3VuZC1jb2xvcjogbGluZWFyLWdyYWRpZW50KCM2REQ1RkEsICMyOTgwQjkpO1xufVxuXG5pb24taXRlbSB7XG4gIC0taW9uLWJhY2tncm91bmQtY29sb3I6IHRyYW5zcGFyZW50IWltcG9ydGFudDtcbn1cblxuLmZsZXgge1xuICBkaXNwbGF5OiBmbGV4O1xuICBqdXN0aWZ5LWNvbnRlbnQ6IHNwYWNlLWJldHdlZW47XG59Il19 */\"","import { Component, OnInit } from '@angular/core';\r\nimport { AngularFireDatabase } from '@angular/fire/database';\r\nimport { ToastController } from '@ionic/angular';\r\nimport { AngularFireAuth } from '@angular/fire/auth';\r\nimport * as firebase from 'firebase/app';\r\nimport { NavController } from '@ionic/angular';\r\nimport {TranslateService} from '@ngx-translate/core';\r\n\r\n@Component({\r\n  selector: 'app-register',\r\n  templateUrl: './register.page.html',\r\n  styleUrls: ['./register.page.scss'],\r\n})\r\nexport class RegisterPage implements OnInit {\r\n\r\ndataUser = {\r\n      email: '',\r\n      password: '',\r\n      cgu: false,\r\n      pseudo: '',\r\n      confirmPassword: ''\r\n    };\r\n  connected: boolean;\r\n  userId: string;\r\n  mail: string;\r\n  method: any;\r\n  \r\n\r\n  constructor(\r\n    private navCtrl: NavController,\r\n    public afDB: AngularFireDatabase,\r\n    public toastController: ToastController,\r\n    public afAuth: AngularFireAuth,\r\n    private translate: TranslateService\r\n  ) {\r\n    this.afAuth.authState.subscribe(auth => {\r\n      if (!auth) {\r\n        console.log('non connecté');\r\n        this.connected = false;\r\n      } else {\r\n        console.log('connecté: ' + auth.uid);\r\n        this.connected = true;\r\n        this.userId = auth.uid;\r\n        this.mail = auth.email;\r\n        this.method = auth.providerData[0].providerId;\r\n      }\r\n    });\r\n  }\r\n\r\n  ngOnInit() {\r\n  }\r\n\r\nsignUp() {\r\nif (this.dataUser.cgu === true && this.dataUser.password === this.dataUser.confirmPassword) {\r\n    if (this.dataUser.email !== null && this.dataUser.password !== null && this.dataUser.pseudo !== null) {\r\n      this.afAuth.auth.createUserWithEmailAndPassword(this.dataUser.email, this.dataUser.password)\r\n          .then(() => {\r\n            console.log('Connexion réussie');\r\n\r\n            this.afAuth.authState.subscribe(auth => {\r\n        const postData = {\r\n          pseudo: this.dataUser.pseudo,\r\n        };\r\n        const updates = {};\r\n        updates['/Users/' + auth.uid ] = postData;\r\n        return firebase.database().ref().update(updates);\r\n});\r\n            this.loginSuccess();\r\n            this.navCtrl.navigateRoot('pages/login');\r\n          }).catch(err => {\r\n        this.loginError();\r\n        console.log('Erreur: ' + err);\r\n      });\r\n    }\r\n  } else {this.loginError(); }\r\n}\r\nasync loginError() {\r\n    const toast = await this.toastController.create({\r\n      message: this.translate.instant(\"TOAST.register.invalid\"),\r\n      position: 'top',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async loginSuccess() {\r\n    const toast = await this.toastController.create({\r\n      message: this.translate.instant(\"TOAST.register.validate\"),\r\n      position: 'top',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n\r\n  async CGUError() {\r\n    const toast = await this.toastController.create({\r\n      message: this.translate.instant(\"TOAST.register.cgu\"),\r\n      position: 'top',\r\n      duration: 2000\r\n    });\r\n    toast.present();\r\n  }\r\n}\r\n"],"sourceRoot":"webpack:///"}